<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Word Guess Game</title>
  </head>
  <body>
    <header>
      <h1>Guess What Letter I'm Thinking Of</h1>
      <h2 id="directions">Please type your guess.</h2>
    </header>
    <div>
      <p>Wins: <span id="player-wins"></p>
      <p> Losses: <span id="player-losses"></p>
      <p> Total Guesses: <span id="total-guesses"></p>
      <p> Guesses Left: <span id="guesses-left"></p>
      <p> Letters Guessed: <span id="letters-guessed"></p>
    </div>

    <script type="text/javascript">
      //Create array of letters to guess
      var alphabet = [
        "a",
        "b",
        "c",
        "d",
        "e",
        "f",
        "g",
        "h",
        "i",
        "j",
        "k",
        "l",
        "m",
        "n",
        "o",
        "p",
        "q",
        "r",
        "s",
        "t",
        "u",
        "v",
        "w",
        "x",
        "y",
        "z"
      ];

      //Create variables to hold number of wins,losses, guesses, & guesses left
      var wins = 0;
      var losses = 0;
      var guessesLeft = 10;
      var guessedLetters = [];
     
      //Create variables to hold references to the places in the html where we want to hold things
      // var directionsText = document.getElementById("directions");
      // var playerGuess = document.getElementById("player-guesses");
      // var playerWins = document.getElementById("player-wins");
      // var playerLosses = document.getElementById("player-losses");
      // var guessesLeft = document.getElementById("guesses-left");
      // var guessedSoFar = document.getElementById("total-guesses");

      //use Math.random method to generate a random letter
      var computerGuess = alphabet[Math.floor(Math.random() * alphabet.length)];

      console.log(computerGuess);

      //function to capture the players keyboard input and make it lowercase
      document.onkeyup = function(event) {
        var keyPress = event.key.toLowerCase();

        addLetter(keyPress);
      };

      //function to catch repeat letters and/or add players guess to guessedLetters
      function addLetter(playersKeypress) {
        var repeatGuess = guessedLetters.some(function(item) {
          return item === playersKeypress;
        });

        if (repeatGuess) {
          alert(playersKeypress + " already guessed. Try again!");
        } else {
          guessedLetters.push(playersKeypress);
          console.log(guessedLetters);

          showGuessedLetters();

          guessMatch(playersKeypress);
        }
      }

      //function to show the letters guessed in the browser
      function showGuessedLetters() {
        var tempStr =
          //guessedSoFar.push(playerGuess);

        if (playerGuess === computerGuess[0] && guessesLeft > 0) {
          playerWins = true;
          wins++;
          guessedLetters.length = 0;
          computerGuess.length = 0;
          alert("WINNER! WINNER! WINNER!" + playerGuess);
          console.log("Guesses Left " + guessesLeft);
          reset();
          //var compGuess = alphabet[Math.floor(Math.random() * alphabet.length)];
          //compGuess.push(compGuess);
          console.log(computerGuess[0]);
        } else if (playerGuess !== computerGuess[0] && guessesLeft > 0) {
          guessesLeft = guessesLeft - 1;
        } else {
          losses++;
          var compGuess = alphabet[Math.floor(Math.random() * alphabet.length)];
          computerGuess.push(compGuess);
          console.log(computerGuess[0]);
        }
        //function to show player's letters guessed in the browser by calling the html id
        function updateGuessedSoFar() {
          var tempStr = lettersGuessed.join(", ");
          document.getElementById("players-guesses").innerHTML = tempStr;
        }

        function guessMatch(character) {
          console.log(character);
          console.log(computerGuess);

          if (character === computerGuess) {
            alert("WINNER, WINNER, WINNER!");
            wins = wins + 1;
            showWins();
          } else if (guessesLeft === 0) {
            alert("Sorry, you lose. Let's try again.");
            resetVariables();
          } else {
            guessesLeft = guessesLeft - 1;
            showGuessesRemaining();
          }
        }

        //function to show wins
        function showWins() {
          document.getElementById("player-wins").innerHTML = wins;
        }

        //function to show guesses remaining by calling the html id
        function showGuessesRemaining() {
          document.getElementById("guesses-left").innerHTML = guessesLeft;
        }

        //Resetting at the end of the game, reset lettersGuessed to be an empty array, guessesLeft returns to 10, restart the game

        function resetVariables() {
          lettersGuessed = [];
          guessesLeft = 10;
        }

        function startGame() {
          showGuessesRemaining();
          showWins();
        }

        startGame();
      }
    </script>
  </body>
</html>
